<!DOCTYPE html />
<html>
<head>
    <meta charset="utf-8" />
    <title>drag</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, minimum-scale=1, user-scalable=no,target-densitydpi=medium-dpi">
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="script/touch-drag.js" type="text/javascript"></script>
    <style>
        * { padding: 0; margin: 0; }
        .div-drag { position: absolute; width: 100px; height: 100px; border: 1px solid red; background: #fff; }
        .div-drag h1 { background: #ccc; font-size: 12px; height: 50px; line-height: 50px; }
    </style>
</head>
<body>
    <div data-role="page" data-fullscreen="true" id="">
    <h1> 触屏版拖动组件</h1>
        <div class="div-drag">
            <h1>
                我只能上下拖动</h1>
            <p>
                ddddddddddd</p>
        </div>
        <div class="div-drag" style="left: 150px;">
            <h1>
                我只能左右拖动</h1>
            <p>
                ddddddddddd</p>
        </div>
        <div class="div-drag" style="left: 80px; top: 120px;z-index:99999">
            <h1>
                我能任意拖动</h1>
            <p>
                ddddddddddd</p>
        </div>
        <div style="position: absolute; border: 1px solid red; width: 250px; height: 300px;
            top: 250px; left: 20px; overflow: hidden;">
            <div class="div-drag" style="left: 10px; top: 10px;">
                <h1>
                    我只能在框里拖</h1>
                <p>
                    我这里也能拖</p>
            </div>
        </div>
        <style>
            .div-menu{width:800px;height:60px;position:absolute;left: 0; top: 0;}
            .div-menu a{width:99px;border:1px solid #ccc;margin-left:-1px;height:58px;line-height:58px;display:inline-block;color:#fff}
        </style>
        <div style="position:absolute;bottom:0;border:1px solid red;border-left:0;border-right:0;width:100%;height:60px;left:0;overflow:hidden;text-align:center;background:#555;">
                <div class="div-menu" >
                    <a href="#">菜单</a><a href="#">也能</a><a href="#">拖动</a><a href="#">菜单4</a><a href="#">菜单5</a><a href="#">菜单6</a><a href="#">菜单7</a><a href="#">菜单8</a>
           
                </div>
        </div>
    </div>
    <script>
        $('.div-drag').eq(0).touchDrag({
            dragbar: 'h1'
            , dragX: false
        });
        $('.div-drag').eq(1).touchDrag({
            dragbar: 'h1'
            , dragY: false
        });
        $('.div-drag').eq(2).touchDrag({
            dragbar: 'h1'
        });
        $('.div-drag').eq(3).touchDrag({
            dragbar: ''
            , minLeft: 0
            , minTop: 0
            , maxLeft: 250 - 102
            , maxTop: 300 - 102
        });

        var minLeft = $('.div-menu').parent().width() - $('.div-menu').width();
        if (minLeft > 0) {
            minLeft = 0;
        }
        var $menu = $('.div-menu').touchDrag({
            dragY: false
            , minLeft: minLeft
            , maxLeft: 0.1
        });
        $(window).resize(function () {
            var minLeft = $('.div-menu').parent().width() - $('.div-menu').width();
            if (minLeft > 0) {
                minLeft = 0;
            }
            $menu.touchDrag[0].minLeft = minLeft;

        });
    </script>
</body>
</html>
